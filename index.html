<!DOCTYPE html>
<html lang="id" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Pendidikan Bunayya Islamic School</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .success-toast { background: #10b981; color: white; }
    .error-toast { background: #ef4444; color: white; }
    .info-toast { background: #3b82f6; color: white; }
    
    .loading-spinner {
      border: 3px solid #f3f4f6;
      border-top: 3px solid #3b82f6;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      display: inline-block;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .portal-card-active {
      border: 3px solid #4F46E5 !important;
      box-shadow: 0 6px 15px rgba(79, 70, 229, 0.3);
    }

    .portal-card {
      transition: all 0.3s ease;
      min-width: 100px;
    }

    .portal-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    
    @media (max-width: 480px) {
      .portal-card {
        padding: 8px !important;
        max-width: 110px !important;
      }
      .portal-card .text-2xl {
        font-size: 1.25rem;
      }
      .portal-card .text-sm {
        font-size: 0.7rem;
      }
    }

    .stats-card {
      transition: transform 0.2s;
    }

    .stats-card:hover {
      transform: translateY(-2px);
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255,255,255,0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .connection-status {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      z-index: 1000;
    }

    .status-connected { background: #10b981; color: white; }
    .status-disconnected { background: #ef4444; color: white; }
    .status-loading { background: #f59e0b; color: white; }

    .chart-bar {
      transition: height 0.5s ease;
    }

    .calendar-day {
      transition: all 0.2s;
    }

    .calendar-day:hover {
      transform: scale(1.1);
    }

    .calendar-event {
      font-size: 10px;
      padding: 2px 4px;
      border-radius: 4px;
      margin-top: 2px;
    }

    .schedule-slot {
      min-height: 60px;
      transition: all 0.2s;
    }

    .schedule-slot:hover {
      background: #f0f9ff;
    }

    /* Login Page Styles */
    #login-page {
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    #login-page .bg-white {
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { 
        opacity: 0;
        transform: translateY(30px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }

    .menu-admin-only {
      /* Will be hidden via JS for non-admin users */
    }
  </style>
</head>
<body class="h-full">
  <!-- Login Page -->
  <div id="login-page" class="fixed inset-0 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center z-[9999]">
    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md mx-4 transform transition-all">
      <div class="text-center mb-8">
        <!-- Logo Container -->
        <div id="login-logo-container" class="mb-4">
          <img id="login-logo" src="" alt="Logo Sekolah" class="w-24 h-24 mx-auto rounded-full object-cover shadow-lg hidden">
          <div id="login-logo-placeholder" class="text-6xl">ğŸ«</div>
        </div>
        <h1 class="text-3xl font-bold text-gray-800">Portal Pendidikan Bunayya Islamic School</h1>
        <p class="text-gray-500 mt-2">Silakan login untuk melanjutkan</p>
      </div>
      
      <div id="login-error" class="hidden bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded-lg mb-4">
        <span id="login-error-text">Username atau password salah</span>
      </div>
      
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Tipe Pengguna</label>
          <select id="login-role" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg">
            <option value="">-- Pilih Tipe --</option>
            <option value="admin">ğŸ‘‘ Administrator</option>
            <option value="guru">ğŸ‘¨â€ğŸ« Guru</option>
            <option value="wali">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Wali Siswa</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
          <input type="text" id="login-username" placeholder="Masukkan username" 
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
          <div class="relative">
            <input type="password" id="login-password" placeholder="Masukkan password" 
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg pr-12">
            <button type="button" onclick="togglePasswordVisibility()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
              <span id="password-toggle-icon">ğŸ‘ï¸</span>
            </button>
          </div>
        </div>
        
        <button onclick="handleLogin()" id="btn-login" class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 font-semibold text-lg transition-all transform hover:scale-[1.02] active:scale-[0.98]">
          ğŸ” Login
        </button>
      </div>
      
      <script>
        // Add Enter key listener for login form
        document.addEventListener('DOMContentLoaded', function() {
          const loginInputs = ['login-role', 'login-username', 'login-password'];
          loginInputs.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
              el.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                  handleLogin();
                }
              });
            }
          });
        });
      </script>
      
      <div class="mt-6 p-4 bg-gray-50 rounded-lg">
        <p class="text-sm font-semibold text-gray-700 mb-2">ğŸ“‹ Petunjuk Login:</p>
        <div class="text-xs text-gray-600 space-y-1">
          <div class="flex justify-between"><span>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Wali:</span><span>Gunakan NIS / NIS (Sesuai Data Siswa)</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner" style="width: 60px; height: 60px; border-width: 5px;"></div>
    <p class="mt-4 text-lg text-gray-600">Menghubungkan ke Google Sheets...</p>
    <p class="mt-2 text-sm text-gray-400" id="loading-status">Memuat data...</p>
  </div>

  <!-- Connection Status -->
  <div id="connection-status" class="connection-status status-loading">
    ğŸ”„ Menghubungkan...
  </div>

  <div id="app" class="h-full w-full bg-gradient-to-br from-blue-50 to-indigo-100 overflow-auto">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 py-4">
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-4">
            <!-- Header Logo -->
            <div id="header-logo-container">
              <img id="header-logo" src="" alt="Logo" class="w-14 h-14 rounded-full object-cover shadow-md hidden">
              <div id="header-logo-placeholder" class="text-4xl">ğŸ«</div>
            </div>
            <div>
              <h1 id="app-title" class="text-2xl md:text-3xl font-bold text-indigo-600">Portal Pendidikan Bunayya Islamic School</h1>
              <p id="school-name" class="text-gray-600 mt-1 text-sm md:text-base">Selamat Datang di Portal Pendidikan Terpadu</p>
            </div>
          </div>
          <div class="flex flex-col gap-1 items-end">
            <div id="user-info" class="hidden sm:flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded-lg">
              <span id="user-role-badge" class="text-sm">ğŸ‘‘</span>
              <span id="user-name-display" class="text-xs font-semibold text-indigo-700">Admin</span>
            </div>
            <div class="flex gap-1 flex-wrap justify-end">
              <button onclick="refreshData()" class="bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600">
                ğŸ”„
              </button>
              <button onclick="showLogoModal()" id="btn-upload-logo" class="bg-purple-500 text-white px-2 py-1 rounded text-xs hover:bg-purple-600 hidden">
                ğŸ–¼ï¸
              </button>
              <button onclick="showSetupModal()" id="btn-setup" class="bg-gray-500 text-white px-2 py-1 rounded text-xs hover:bg-gray-600">
                âš™ï¸
              </button>
              <button onclick="handleLogout()" class="bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600">
                ğŸšª
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Setup Modal -->
    <div id="setup-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
      <div class="bg-white rounded-xl shadow-2xl p-6 max-w-lg w-full mx-4">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">âš™ï¸ Setup Google Sheets</h2>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">URL Google Apps Script *</label>
          <input type="text" id="script-url-input" placeholder="https://script.google.com/macros/s/..." 
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
          <p class="text-xs text-gray-500 mt-1">Paste URL deployment dari Google Apps Script</p>
        </div>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
          <h3 class="font-semibold text-blue-800 mb-2">ğŸ“‹ Cara Setup:</h3>
          <ol class="text-sm text-blue-700 list-decimal ml-4 space-y-1">
            <li>Buka Google Sheets baru</li>
            <li>Klik Extensions â†’ Apps Script</li>
            <li>Copy-paste kode dari file code.gs</li>
            <li>Simpan dan Deploy â†’ New Deployment</li>
            <li>Pilih "Web app", akses: Anyone</li>
            <li>Copy URL dan paste di atas</li>
            <li>Jalankan menu ğŸ« Portal Bunayya â†’ Inisialisasi Sheet</li>
          </ol>
        </div>
        <div class="flex gap-2">
          <button onclick="saveScriptUrl()" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
            ğŸ’¾ Simpan & Hubungkan
          </button>
          <button onclick="hideSetupModal()" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400">
            Tutup
          </button>
        </div>
      </div>
    </div>

    <!-- Logo Upload Modal -->
    <div id="logo-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
      <div class="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ–¼ï¸ Upload Logo Sekolah</h2>
        
        <!-- Current Logo Preview -->
        <div class="mb-4 text-center">
          <p class="text-sm font-medium text-gray-700 mb-2">Logo Saat Ini:</p>
          <div class="inline-block">
            <img id="current-logo-preview" src="" alt="Logo" class="w-32 h-32 rounded-full object-cover shadow-lg border-4 border-indigo-200 hidden">
            <div id="current-logo-placeholder" class="w-32 h-32 rounded-full bg-indigo-100 flex items-center justify-center text-5xl shadow-lg border-4 border-indigo-200">ğŸ«</div>
          </div>
        </div>
        
        <!-- Upload Input -->
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Gambar Logo *</label>
          <input type="file" id="logo-file-input" accept="image/*" onchange="previewLogo(event)" 
            class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-100 file:text-indigo-700 hover:file:bg-indigo-200">
          <p class="text-xs text-gray-500 mt-1">Format: JPG, PNG, GIF. Ukuran maks: 2MB. Disarankan: 200x200 px</p>
        </div>
        
        <!-- New Logo Preview -->
        <div id="new-logo-preview-container" class="mb-4 text-center hidden">
          <p class="text-sm font-medium text-gray-700 mb-2">Preview Logo Baru:</p>
          <img id="new-logo-preview" src="" alt="Preview" class="w-32 h-32 rounded-full object-cover shadow-lg border-4 border-green-300 mx-auto">
        </div>
        
        <!-- Actions -->
        <div class="flex gap-2">
          <button onclick="saveLogo()" class="flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
            ğŸ’¾ Simpan Logo
          </button>
          <button onclick="removeLogo()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">
            ğŸ—‘ï¸ Hapus
          </button>
          <button onclick="hideLogoModal()" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400">
            Tutup
          </button>
        </div>
      </div>
    </div>

    <!-- Portal Tabs - Sejajar dan Diperkecil -->
    <div class="bg-gradient-to-r from-indigo-50 to-blue-50 py-4">
      <div class="max-w-4xl mx-auto px-4">
        <div class="flex flex-row justify-center items-stretch gap-3">
          <button onclick="switchPortal('guru')" id="tab-guru" class="portal-card portal-card-active bg-white rounded-lg shadow-lg px-4 py-3 text-center flex-1 max-w-[180px]">
            <div class="text-2xl mb-1">ğŸ‘¨â€ğŸ«</div>
            <div class="text-sm font-bold text-indigo-600 mb-1">Portal Guru</div>
            <div class="text-xs text-gray-600 hidden sm:block">Kelola absensi & jurnal</div>
          </button>
          <button onclick="switchPortal('siswa')" id="tab-siswa" class="portal-card bg-white rounded-lg shadow-md px-4 py-3 text-center border-2 border-gray-200 flex-1 max-w-[180px]">
            <div class="text-2xl mb-1">ğŸ‘¨â€ğŸ“</div>
            <div class="text-sm font-bold text-gray-700 mb-1">Portal Siswa</div>
            <div class="text-xs text-gray-600 hidden sm:block">Laporan & target belajar</div>
          </button>
          <button onclick="switchPortal('wali')" id="tab-wali" class="portal-card bg-white rounded-lg shadow-md px-4 py-3 text-center border-2 border-gray-200 flex-1 max-w-[180px]">
            <div class="text-2xl mb-1">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
            <div class="text-sm font-bold text-gray-700 mb-1">Portal Wali</div>
            <div class="text-xs text-gray-600 hidden sm:block">Pantau perkembangan</div>
          </button>
        </div>
      </div>
    </div>

    <!-- Menu Horizontal Portal Guru -->
    <div id="menu-guru-horizontal" class="bg-white shadow-sm border-b">
      <div class="max-w-7xl mx-auto px-4 py-3">
        <div class="flex flex-row flex-nowrap gap-2 overflow-x-auto justify-start" style="-webkit-overflow-scrolling: touch;">
          <button onclick="showGuruSection('dashboard')" id="menu-dashboard" class="px-3 py-2 rounded-lg bg-indigo-600 text-white font-semibold whitespace-nowrap text-xs">ğŸ“Š Dashboard</button>
          <button onclick="showGuruSection('absensi-siswa')" id="menu-absensi-siswa" class="px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs">ğŸ“‹ Absensi Siswa</button>
          <button onclick="showGuruSection('absensi-guru')" id="menu-absensi-guru" class="px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs">ğŸ‘¨â€ğŸ« Absensi Guru</button>
          <button onclick="showGuruSection('jurnal')" id="menu-jurnal" class="px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs">ğŸ“ Jurnal Mengajar</button>
          <button onclick="showGuruSection('rekap-nilai')" id="menu-rekap-nilai" class="px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs">ğŸ“ˆ Rekap Nilai</button>
          <button onclick="showGuruSection('laporan')" id="menu-laporan" class="px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs">ğŸ“„ Laporan Bulanan</button>
          <button onclick="showGuruSection('master-guru')" id="menu-master-guru" class="px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs menu-admin-only">ğŸ‘¥ Master Data Guru</button>
        </div>
      </div>
    </div>

    <!-- Portal Guru Content -->
    <main id="portal-guru" class="max-w-7xl mx-auto px-4 py-6">
      <div>
          <!-- Dashboard -->
          <section id="section-dashboard" class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">ğŸ“Š Dashboard Statistik</h2>
            
            <!-- Summary Cards -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
              <div class="stats-card bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white">
                <div class="text-3xl font-bold" id="dash-total-siswa">0</div>
                <div class="text-sm opacity-90">Total Siswa</div>
                <div class="text-2xl mt-2">ğŸ‘¨â€ğŸ“</div>
              </div>
              <div class="stats-card bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white">
                <div class="text-3xl font-bold" id="dash-total-guru">0</div>
                <div class="text-sm opacity-90">Total Guru</div>
                <div class="text-2xl mt-2">ğŸ‘¨â€ğŸ«</div>
              </div>
              <div class="stats-card bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white">
                <div class="text-3xl font-bold" id="dash-total-jurnal">0</div>
                <div class="text-sm opacity-90">Jurnal Bulan Ini</div>
                <div class="text-2xl mt-2">ğŸ“</div>
              </div>
              <div class="stats-card bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-4 text-white">
                <div class="text-3xl font-bold" id="dash-kehadiran">0%</div>
                <div class="text-sm opacity-90">Kehadiran Hari Ini</div>
                <div class="text-2xl mt-2">âœ…</div>
              </div>
            </div>

            <!-- Charts Row -->
            <div class="grid md:grid-cols-2 gap-6 mb-6">
              <!-- Attendance Chart -->
              <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“Š Statistik Kehadiran Minggu Ini</h3>
                <div id="dash-attendance-chart" class="h-48 flex items-end justify-around gap-2">
                  <!-- Chart bars will be inserted here -->
                </div>
                <div class="flex justify-around mt-2 text-xs text-gray-600">
                  <span>Sen</span><span>Sel</span><span>Rab</span><span>Kam</span><span>Jum</span><span>Sab</span>
                </div>
              </div>

              <!-- Subject Distribution Chart -->
              <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“š Distribusi Mata Pelajaran</h3>
                <div id="dash-subject-chart" class="h-48 flex items-end justify-around gap-2">
                  <!-- Chart bars will be inserted here -->
                </div>
              </div>
            </div>

            <!-- Recent Activities -->
            <div class="bg-gray-50 rounded-xl p-4">
              <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ• Aktivitas Terbaru</h3>
              <div id="dash-recent-activities" class="space-y-3">
                <p class="text-gray-500 text-center py-4">Memuat aktivitas...</p>
              </div>
            </div>
          </section>

          <!-- Absensi Siswa -->
          <section id="section-absensi-siswa" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“‹ Absensi Siswa</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Kelas *</label>
                <select id="student-class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal *</label>
                <input type="date" id="student-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
            </div>
            <div class="flex gap-4">
              <button onclick="loadStudentAttendance()" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">ğŸ“‹ Muat Data</button>
              <button onclick="saveStudentAttendance()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan ke Sheets</button>
            </div>
            <div id="student-attendance-list" class="mt-4"></div>
          </section>

          <!-- Absensi Guru -->
          <section id="section-absensi-guru" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ‘¨â€ğŸ« Absensi Guru</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Guru *</label>
                <select id="teacher-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Guru</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Kelas *</label>
                <select id="teacher-class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal *</label>
                <input type="date" id="teacher-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Status *</label>
                <select id="teacher-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="Hadir">âœ“ Hadir</option>
                  <option value="Sakit">ğŸ¤’ Sakit</option>
                  <option value="Izin">ğŸ“ Izin</option>
                  <option value="Alpa">âœ— Alpa</option>
                </select>
              </div>
            </div>
            <div class="flex gap-4">
              <button onclick="loadTeacherAttendance()" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">ğŸ“‹ Muat Data</button>
              <button onclick="saveTeacherAttendance()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan</button>
            </div>
            <div id="teacher-attendance-display" class="mt-4"></div>
          </section>

          <!-- Jurnal Mengajar -->
          <section id="section-jurnal" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“ Jurnal Mengajar</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Guru *</label>
                <select id="journal-teacher" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Guru</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal *</label>
                <input type="date" id="journal-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                <select id="journal-class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Mata Pelajaran * <span class="text-xs text-indigo-500 font-normal">(Pilih dulu untuk hasil generate lebih akurat)</span></label>
                <select id="journal-subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Mata Pelajaran</option>
                  <option value="IQRO">IQRO</option>
                  <option value="TAHFIDZ">TAHFIDZ</option>
                  <option value="MAKHORIJUL KHURUF">MAKHORIJUL KHURUF</option>
                  <option value="HAFALAN HADIST HARIAN">HAFALAN HADIST HARIAN</option>
                  <option value="HAFALAN DOA HARIAN">HAFALAN DOA HARIAN</option>
                  <option value="HAFALAN DOA SHOLAT">HAFALAN DOA SHOLAT</option>
                  <option value="PRAKTEK AQIDAH DAN AKHLAQ">PRAKTEK AQIDAH DAN AKHLAQ</option>
                  <option value="AKHLAQ">AKHLAQ</option>
                  <option value="NAHWU">NAHWU</option>
                  <option value="BELAJAR HURUF ABJAD">BELAJAR HURUF ABJAD</option>
                  <option value="BELAJAR ANGKA">BELAJAR ANGKA</option>
                  <option value="BAHASA ARAB">BAHASA ARAB</option>
                  <option value="BAHASA INGGRIS">BAHASA INGGRIS</option>
                  <option value="MATEMATIKA">MATEMATIKA</option>
                  <option value="IPAS">IPAS</option>
                  <option value="BAHASA INDONESIA">BAHASA INDONESIA</option>
                  <option value="PKN">PKN</option>
                  <option value="PJOK">PJOK</option>
                  <option value="SENI BUDAYA">SENI BUDAYA</option>
                  <option value="LAINNYA">LAINNYA</option>
                </select>
              </div>
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">Topik * <span class="text-xs text-indigo-500 font-normal">(Ketik topik untuk generate otomatis)</span></label>
              <input type="text" id="journal-topic" placeholder="Contoh: Surat Al-Fatihah, Perkalian 1-10, Doa Sebelum Makan" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">Kegiatan <span class="text-xs text-green-600 font-normal">âœ¨ Otomatis dari Topik & Mapel</span></label>
              <textarea id="journal-activity" rows="3" placeholder="Akan terisi otomatis saat mengetik topik..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-green-50"></textarea>
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">Catatan <span class="text-xs text-green-600 font-normal">âœ¨ Otomatis dari Topik & Mapel</span></label>
              <textarea id="journal-notes" rows="3" placeholder="Akan terisi otomatis saat mengetik topik..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-green-50"></textarea>
            </div>
            <button onclick="saveJournal()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan Jurnal</button>
          </section>

          <!-- Rekap Nilai -->
          <section id="section-rekap-nilai" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“ˆ Rekap Nilai Siswa</h2>
            
            <!-- Form Input Nilai -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 mb-6">
              <h3 class="text-lg font-semibold text-gray-700 mb-4">â• Input Nilai Baru</h3>
              <div class="grid md:grid-cols-3 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                  <select id="nilai-class" onchange="loadStudentsByClass('nilai')" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih Kelas</option>
                    <option value="TK A">TK A</option>
                    <option value="TK B">TK B</option>
                    <option value="Kelas 1">Kelas 1</option>
                    <option value="Kelas 2">Kelas 2</option>
                    <option value="Kelas 3">Kelas 3</option>
                    <option value="Kelas 4">Kelas 4</option>
                    <option value="Kelas 5">Kelas 5</option>
                    <option value="Kelas 6">Kelas 6</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Siswa *</label>
                  <select id="nilai-student" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih Siswa</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Mata Pelajaran *</label>
                  <select id="nilai-subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih Mapel</option>
                    <option value="IQRO">IQRO</option>
                    <option value="TAHFIDZ">TAHFIDZ</option>
                    <option value="MAKHORIJUL KHURUF">MAKHORIJUL KHURUF</option>
                    <option value="HAFALAN HADIST HARIAN">HAFALAN HADIST HARIAN</option>
                    <option value="HAFALAN DOA HARIAN">HAFALAN DOA HARIAN</option>
                    <option value="HAFALAN DOA SHOLAT">HAFALAN DOA SHOLAT</option>
                    <option value="PRAKTEK AQIDAH DAN AKHLAQ">PRAKTEK AQIDAH DAN AKHLAQ</option>
                    <option value="AKHLAQ">AKHLAQ</option>
                    <option value="NAHWU">NAHWU</option>
                    <option value="BELAJAR HURUF ABJAD">BELAJAR HURUF ABJAD</option>
                    <option value="BELAJAR ANGKA">BELAJAR ANGKA</option>
                    <option value="BAHASA ARAB">BAHASA ARAB</option>
                    <option value="BAHASA INGGRIS">BAHASA INGGRIS</option>
                    <option value="MATEMATIKA">MATEMATIKA</option>
                    <option value="IPAS">IPAS</option>
                    <option value="BAHASA INDONESIA">BAHASA INDONESIA</option>
                    <option value="PKN">PKN</option>
                    <option value="PJOK">PJOK</option>
                    <option value="SENI BUDAYA">SENI BUDAYA</option>
                    <option value="LAINNYA">LAINNYA</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Penilaian *</label>
                  <select id="nilai-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih Jenis</option>
                    <option value="Ulangan Harian">Ulangan Harian</option>
                    <option value="UTS">UTS</option>
                    <option value="UAS">UAS</option>
                    <option value="Tugas">Tugas</option>
                    <option value="Praktek">Praktek</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Nilai *</label>
                  <input type="number" id="nilai-score" min="0" max="100" placeholder="0-100" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal *</label>
                  <input type="date" id="nilai-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                </div>
              </div>
              <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Catatan</label>
                <input type="text" id="nilai-notes" placeholder="Catatan tambahan..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
              </div>
              <button onclick="saveNilai()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700">ğŸ’¾ Simpan Nilai</button>
            </div>

            <!-- Filter & Display -->
            <div class="mb-4 flex flex-wrap gap-4 items-end">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Filter Kelas</label>
                <select id="filter-nilai-class" onchange="loadNilaiList()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                  <option value="">Semua Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Filter Mapel</label>
                <select id="filter-nilai-subject" onchange="loadNilaiList()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                  <option value="">Semua Mapel</option>
                  <option value="IQRO">IQRO</option>
                  <option value="TAHFIDZ">TAHFIDZ</option>
                  <option value="MAKHORIJUL KHURUF">MAKHORIJUL KHURUF</option>
                  <option value="HAFALAN HADIST HARIAN">HAFALAN HADIST HARIAN</option>
                  <option value="HAFALAN DOA HARIAN">HAFALAN DOA HARIAN</option>
                  <option value="HAFALAN DOA SHOLAT">HAFALAN DOA SHOLAT</option>
                  <option value="PRAKTEK AQIDAH DAN AKHLAQ">PRAKTEK AQIDAH DAN AKHLAQ</option>
                  <option value="AKHLAQ">AKHLAQ</option>
                  <option value="NAHWU">NAHWU</option>
                  <option value="BELAJAR HURUF ABJAD">BELAJAR HURUF ABJAD</option>
                  <option value="BELAJAR ANGKA">BELAJAR ANGKA</option>
                  <option value="BAHASA ARAB">BAHASA ARAB</option>
                  <option value="BAHASA INGGRIS">BAHASA INGGRIS</option>
                  <option value="MATEMATIKA">MATEMATIKA</option>
                  <option value="IPAS">IPAS</option>
                  <option value="BAHASA INDONESIA">BAHASA INDONESIA</option>
                  <option value="PKN">PKN</option>
                  <option value="PJOK">PJOK</option>
                  <option value="SENI BUDAYA">SENI BUDAYA</option>
                  <option value="LAINNYA">LAINNYA</option>
                </select>
              </div>
              <button onclick="loadNilaiList()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">ğŸ”„ Refresh</button>
              <button onclick="downloadNilaiReport()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">ğŸ“¥ Download Excel</button>
            </div>

            <div id="nilai-list" class="overflow-x-auto">
              <p class="text-gray-500 text-center py-8">Pilih filter untuk melihat rekap nilai</p>
            </div>
          </section>

          <!-- Laporan Bulanan -->
          <section id="section-laporan" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“„ Laporan Bulanan</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Guru</label>
                <select id="report-teacher" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Semua Guru</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                <select id="report-class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Bulan *</label>
                <input type="month" id="report-month" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Laporan *</label>
                <select id="report-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Jenis</option>
                  <option value="Absensi">Absensi</option>
                  <option value="Jurnal Mengajar">Jurnal Mengajar</option>
                  <option value="Laporan Kegiatan">Laporan Kegiatan</option>
                  <option value="Nilai">Rekap Nilai</option>
                </select>
              </div>
            </div>
            <div class="flex gap-4">
              <button onclick="generateReport()" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">ğŸ“Š Generate Laporan</button>
              <button onclick="downloadReport()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">ğŸ“¥ Download Excel</button>
              <button onclick="deleteReportData()" id="delete-btn" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700">ğŸ—‘ï¸ Hapus Data</button>
            </div>
            <div id="report-display" class="mt-6"></div>
          </section>

          <!-- Master Data Guru -->
          <section id="section-master-guru" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ‘¥ Master Data Guru</h2>
            
            <div class="bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg p-4 mb-6">
              <h3 class="text-lg font-semibold text-gray-700 mb-4">â• Tambah/Edit Data Guru</h3>
              <div class="grid md:grid-cols-3 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">NIP/NIK *</label>
                  <input type="text" id="guru-nip" placeholder="Masukkan NIP/NIK" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap *</label>
                  <input type="text" id="guru-nama" placeholder="Nama lengkap guru" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                  <input type="email" id="guru-email" placeholder="email@sekolah.com" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">No. Telepon</label>
                  <input type="text" id="guru-telepon" placeholder="08xxxxxxxxxx" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Mata Pelajaran</label>
                  <select id="guru-mapel" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                    <option value="">Pilih Mapel</option>
                    <option value="IQRO">IQRO</option>
                    <option value="TAHFIDZ">TAHFIDZ</option>
                    <option value="BAHASA ARAB">BAHASA ARAB</option>
                    <option value="MATEMATIKA">MATEMATIKA</option>
                    <option value="BAHASA INDONESIA">BAHASA INDONESIA</option>
                    <option value="WALI KELAS">WALI KELAS</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                  <select id="guru-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                    <option value="Aktif">âœ“ Aktif</option>
                    <option value="Cuti">ğŸ“ Cuti</option>
                    <option value="Tidak Aktif">âœ— Tidak Aktif</option>
                  </select>
                </div>
              </div>
              <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Alamat</label>
                <textarea id="guru-alamat" rows="2" placeholder="Alamat lengkap..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"></textarea>
              </div>
              <div class="flex gap-3">
                <button onclick="saveGuru()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan Guru</button>
                <button onclick="clearGuruForm()" class="bg-gray-400 text-white px-6 py-2 rounded-lg hover:bg-gray-500">ğŸ”„ Reset Form</button>
              </div>
            </div>

            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
              <h3 class="text-lg font-semibold text-yellow-800 mb-2">ğŸ“¤ Import Data Guru dari CSV</h3>
              <p class="text-sm text-gray-600 mb-3">Format CSV: NIP, Nama, Email, Telepon, Mapel, Status, Alamat</p>
              <div class="flex gap-3 items-center flex-wrap">
                <input type="file" id="guru-csv-file" accept=".csv" class="text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-yellow-100 file:text-yellow-700 hover:file:bg-yellow-200">
                <button onclick="importGuruCSV()" class="bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 text-sm">ğŸ“¥ Import CSV</button>
                <button onclick="downloadGuruTemplate()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 text-sm">ğŸ“„ Download Template</button>
              </div>
            </div>

            <div class="mb-4 flex justify-between items-center">
              <h3 class="text-lg font-semibold text-gray-700">ğŸ“‹ Daftar Guru (<span id="guru-count">0</span>)</h3>
              <div class="flex gap-2">
                <input type="text" id="guru-search" placeholder="ğŸ” Cari guru..." onkeyup="filterGuruList()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500">
                <button onclick="loadGuruList()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 text-sm">ğŸ”„ Refresh</button>
              </div>
            </div>
            <div id="guru-list" class="space-y-3">
              <p class="text-gray-500 text-center py-8">Memuat data guru...</p>
            </div>
          </section>

          <!-- Master Data Siswa -->
          <section id="section-master-siswa" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“ Master Data Siswa</h2>
            
            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 mb-6">
              <h3 class="text-lg font-semibold text-gray-700 mb-4">â• Tambah/Edit Data Siswa</h3>
              <div class="grid md:grid-cols-3 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">NIS *</label>
                  <input type="text" id="siswa-nis" placeholder="Masukkan NIS" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap *</label>
                  <input type="text" id="siswa-nama" placeholder="Nama lengkap siswa" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                  <select id="siswa-kelas" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                    <option value="">Pilih Kelas</option>
                    <option value="TK A">TK A</option>
                    <option value="TK B">TK B</option>
                    <option value="Kelas 1">Kelas 1</option>
                    <option value="Kelas 2">Kelas 2</option>
                    <option value="Kelas 3">Kelas 3</option>
                    <option value="Kelas 4">Kelas 4</option>
                    <option value="Kelas 5">Kelas 5</option>
                    <option value="Kelas 6">Kelas 6</option>
                  </select>
                </div>
              </div>
              <div class="flex gap-3">
                <button onclick="saveSiswa()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan Siswa</button>
                <button onclick="clearSiswaForm()" class="bg-gray-400 text-white px-6 py-2 rounded-lg hover:bg-gray-500">ğŸ”„ Reset Form</button>
              </div>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
              <h3 class="text-lg font-semibold text-blue-800 mb-2">ğŸ“¤ Import Data Siswa dari CSV</h3>
              <p class="text-sm text-gray-600 mb-3">Format CSV: NIS, Nama, Kelas</p>
              <div class="flex gap-3 items-center flex-wrap">
                <input type="file" id="siswa-csv-file" accept=".csv" class="text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200">
                <button onclick="importSiswaCSV()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">ğŸ“¥ Import CSV</button>
                <button onclick="downloadSiswaTemplate()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 text-sm">ğŸ“„ Download Template</button>
              </div>
            </div>

            <div class="mb-4 flex flex-wrap justify-between items-center gap-2">
              <h3 class="text-lg font-semibold text-gray-700">ğŸ“‹ Daftar Siswa (<span id="siswa-count">0</span>)</h3>
              <div class="flex gap-2 flex-wrap">
                <select id="siswa-filter-kelas" onchange="filterSiswaList()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500">
                  <option value="">Semua Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
                <input type="text" id="siswa-search" placeholder="ğŸ” Cari siswa..." onkeyup="filterSiswaList()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500">
                <button onclick="loadSiswaList()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm">ğŸ”„ Refresh</button>
              </div>
            </div>
            <div id="siswa-list" class="space-y-3">
              <p class="text-gray-500 text-center py-8">Memuat data siswa...</p>
            </div>
          </section>
        </div>
    </main>

    <!-- Portal Siswa Content -->
    <main id="portal-siswa" class="max-w-7xl mx-auto px-4 py-8" style="display: none;">
      <!-- Menu Horizontal Portal Siswa -->
      <div class="bg-white shadow-sm border-b mb-3">
        <div class="max-w-7xl mx-auto px-2 py-2">
          <div class="flex flex-row flex-nowrap gap-1 overflow-x-auto justify-start" style="-webkit-overflow-scrolling: touch;">
            <button onclick="showSiswaSection('laporan-harian')" id="menu-laporan-harian" class="px-2 py-1 rounded-md bg-indigo-600 text-white font-medium whitespace-nowrap text-xs">ğŸ“ Harian</button>
            <button onclick="showSiswaSection('laporan-kegiatan')" id="menu-laporan-kegiatan" class="px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs">ğŸ¯ Kegiatan</button>
            <button onclick="showSiswaSection('target')" id="menu-target" class="px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs">ğŸ¯ Target</button>
            <button onclick="showSiswaSection('master-siswa')" id="menu-master-siswa-portal" class="px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 whitespace-nowrap text-xs menu-admin-only">ğŸ“ Siswa</button>
          </div>
        </div>
      </div>

      <div>
        <!-- Laporan Harian -->
          <section id="section-laporan-harian" class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“ Laporan Harian</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                <select id="daily-class" onchange="loadStudentsByClass('daily')" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Siswa *</label>
                <select id="daily-student" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih kelas terlebih dahulu</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal *</label>
                <input type="date" id="daily-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Bahasan *</label>
                <input type="text" id="daily-topic" placeholder="Contoh: Surat Al-Ikhlas" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Halaman</label>
                <input type="text" id="daily-page" placeholder="Contoh: 15-17" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Hasil *</label>
                <select id="daily-result" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Hasil</option>
                  <option value="Lulus">âœ“ Lulus</option>
                  <option value="Tidak Lulus">âœ— Tidak Lulus</option>
                  <option value="Perlu Perbaikan">âš ï¸ Perlu Perbaikan</option>
                </select>
              </div>
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">Catatan</label>
              <textarea id="daily-notes" rows="3" placeholder="Catatan tambahan..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"></textarea>
            </div>
            <button onclick="saveDailyReport()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan Laporan</button>
          </section>

          <!-- Laporan Kegiatan -->
          <section id="section-laporan-kegiatan" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ¯ Laporan Kegiatan</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                <select id="activity-class" onchange="loadStudentsByClass('activity')" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Siswa *</label>
                <select id="activity-student" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih kelas terlebih dahulu</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal *</label>
                <input type="date" id="activity-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Kategori *</label>
                <select id="activity-category" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kategori</option>
                  <option value="IQRO">IQRO</option>
                  <option value="TAHFIDZ">TAHFIDZ</option>
                  <option value="HAFALAN DOA">HAFALAN DOA</option>
                  <option value="PRAKTEK IBADAH">PRAKTEK IBADAH</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Penilaian *</label>
                <select id="activity-rating" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Penilaian</option>
                  <option value="Sangat Baik">â­â­â­â­â­ Sangat Baik</option>
                  <option value="Baik">â­â­â­â­ Baik</option>
                  <option value="Cukup">â­â­â­ Cukup</option>
                  <option value="Perlu Bimbingan">â­â­ Perlu Bimbingan</option>
                </select>
              </div>
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">Deskripsi *</label>
              <textarea id="activity-description" rows="3" placeholder="Deskripsi kegiatan..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"></textarea>
            </div>
            <button onclick="saveActivityReport()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan Laporan</button>
          </section>

          <!-- Target Pencapaian -->
          <section id="section-target" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ¯ Target Pencapaian</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                <select id="target-class" onchange="loadStudentsByClass('target')" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Siswa *</label>
                <select id="target-student" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih kelas terlebih dahulu</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Mata Pelajaran *</label>
                <select id="target-category" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                  <option value="">Pilih Mata Pelajaran</option>
                  <option value="IQRO">IQRO</option>
                  <option value="TAHFIDZ">TAHFIDZ</option>
                  <option value="MAKHORIJUL KHURUF">MAKHORIJUL KHURUF</option>
                  <option value="HAFALAN HADIST HARIAN">HAFALAN HADIST HARIAN</option>
                  <option value="HAFALAN DOA HARIAN">HAFALAN DOA HARIAN</option>
                  <option value="HAFALAN DOA SHOLAT">HAFALAN DOA SHOLAT</option>
                  <option value="PRAKTEK AQIDAH DAN AKHLAQ">PRAKTEK AQIDAH DAN AKHLAQ</option>
                  <option value="AKHLAQ">AKHLAQ</option>
                  <option value="NAHWU">NAHWU</option>
                  <option value="BELAJAR HURUF ABJAD">BELAJAR HURUF ABJAD</option>
                  <option value="BELAJAR ANGKA">BELAJAR ANGKA</option>
                  <option value="BAHASA ARAB">BAHASA ARAB</option>
                  <option value="BAHASA INGGRIS">BAHASA INGGRIS</option>
                  <option value="MATEMATIKA">MATEMATIKA</option>
                  <option value="IPAS">IPAS</option>
                  <option value="BAHASA INDONESIA">BAHASA INDONESIA</option>
                  <option value="PKN">PKN</option>
                  <option value="PJOK">PJOK</option>
                  <option value="SENI BUDAYA">SENI BUDAYA</option>
                  <option value="LAINNYA">LAINNYA</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Progress *</label>
                <input type="text" id="target-progress" placeholder="Contoh: 5/10 surat" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              </div>
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">Catatan</label>
              <textarea id="target-notes" rows="3" placeholder="Catatan pencapaian..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"></textarea>
            </div>
            <button onclick="saveTarget()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan Target</button>
          </section>

          <!-- Master Data Siswa (di Portal Siswa) -->
          <section id="section-master-siswa-siswa" class="bg-white rounded-lg shadow-lg p-6 mb-6" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“ Master Data Siswa</h2>
            
            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 mb-6">
              <h3 class="text-lg font-semibold text-gray-700 mb-4">â• Tambah/Edit Data Siswa</h3>
              <div class="grid md:grid-cols-3 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">NIS *</label>
                  <input type="text" id="siswa-nis-2" placeholder="Masukkan NIS" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap *</label>
                  <input type="text" id="siswa-nama-2" placeholder="Nama lengkap siswa" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                  <select id="siswa-kelas-2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                    <option value="">Pilih Kelas</option>
                    <option value="TK A">TK A</option>
                    <option value="TK B">TK B</option>
                    <option value="Kelas 1">Kelas 1</option>
                    <option value="Kelas 2">Kelas 2</option>
                    <option value="Kelas 3">Kelas 3</option>
                    <option value="Kelas 4">Kelas 4</option>
                    <option value="Kelas 5">Kelas 5</option>
                    <option value="Kelas 6">Kelas 6</option>
                  </select>
                </div>
              </div>
              <div class="flex gap-3">
                <button onclick="saveSiswa2()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">ğŸ’¾ Simpan Siswa</button>
                <button onclick="clearSiswaForm2()" class="bg-gray-400 text-white px-6 py-2 rounded-lg hover:bg-gray-500">ğŸ”„ Reset Form</button>
              </div>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
              <h3 class="text-lg font-semibold text-blue-800 mb-2">ğŸ“¤ Import Data Siswa dari CSV</h3>
              <p class="text-sm text-gray-600 mb-3">Format CSV: NIS, Nama, Kelas</p>
              <div class="flex gap-3 items-center flex-wrap">
                <input type="file" id="siswa-csv-file-2" accept=".csv" class="text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200">
                <button onclick="importSiswaCSV2()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">ğŸ“¥ Import CSV</button>
                <button onclick="downloadSiswaTemplate()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 text-sm">ğŸ“„ Download Template</button>
              </div>
            </div>

            <div class="mb-4 flex flex-wrap justify-between items-center gap-2">
              <h3 class="text-lg font-semibold text-gray-700">ğŸ“‹ Daftar Siswa (<span id="siswa-count-2">0</span>)</h3>
              <div class="flex gap-2 flex-wrap">
                <select id="siswa-filter-kelas-2" onchange="filterSiswaList2()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500">
                  <option value="">Semua Kelas</option>
                  <option value="TK A">TK A</option>
                  <option value="TK B">TK B</option>
                  <option value="Kelas 1">Kelas 1</option>
                  <option value="Kelas 2">Kelas 2</option>
                  <option value="Kelas 3">Kelas 3</option>
                  <option value="Kelas 4">Kelas 4</option>
                  <option value="Kelas 5">Kelas 5</option>
                  <option value="Kelas 6">Kelas 6</option>
                </select>
                <input type="text" id="siswa-search-2" placeholder="ğŸ” Cari siswa..." onkeyup="filterSiswaList2()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500">
                <button onclick="loadSiswaList2()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm">ğŸ”„ Refresh</button>
              </div>
            </div>
            <div id="siswa-list-2" class="space-y-3">
              <p class="text-gray-500 text-center py-8">Memuat data siswa...</p>
            </div>
          </section>
      </div>
    </main>

    <!-- Portal Wali Content -->
    <main id="portal-wali" class="max-w-7xl mx-auto px-4 py-8" style="display: none;">
      <section class="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Pantau Perkembangan Anak</h2>
        <div class="grid md:grid-cols-2 gap-4 mb-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Kelas</label>
            <select id="parent-class" onchange="loadStudentsByClass('parent')" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="">Pilih Kelas</option>
              <option value="TK A">TK A</option>
              <option value="TK B">TK B</option>
              <option value="Kelas 1">Kelas 1</option>
              <option value="Kelas 2">Kelas 2</option>
              <option value="Kelas 3">Kelas 3</option>
              <option value="Kelas 4">Kelas 4</option>
              <option value="Kelas 5">Kelas 5</option>
              <option value="Kelas 6">Kelas 6</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Nama Siswa</label>
            <select id="parent-student" onchange="loadStudentProgress()" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="">Pilih kelas terlebih dahulu</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <div class="stats-card bg-blue-50 rounded-lg p-4 text-center">
            <div class="text-3xl font-bold text-blue-600" id="total-reports">0</div>
            <div class="text-sm text-gray-600 mt-1">Total Laporan</div>
          </div>
          <div class="stats-card bg-green-50 rounded-lg p-4 text-center">
            <div class="text-3xl font-bold text-green-600" id="passed-reports">0</div>
            <div class="text-sm text-gray-600 mt-1">Lulus</div>
          </div>
          <div class="stats-card bg-red-50 rounded-lg p-4 text-center">
            <div class="text-3xl font-bold text-red-600" id="failed-reports">0</div>
            <div class="text-sm text-gray-600 mt-1">Tidak Lulus</div>
          </div>
          <div class="stats-card bg-purple-50 rounded-lg p-4 text-center">
            <div class="text-3xl font-bold text-purple-600" id="active-targets">0</div>
            <div class="text-sm text-gray-600 mt-1">Target Aktif</div>
          </div>
        </div>

        <!-- 6 Grafik Laporan -->
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
          <!-- Grafik 1: Kehadiran Bulanan -->
          <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 shadow-sm" style="min-height: 180px;">
            <h4 class="text-sm font-semibold text-blue-800 mb-3 flex items-center gap-2">
              <span>ğŸ“Š</span> Kehadiran Bulanan
            </h4>
            <div id="wali-chart-kehadiran" class="h-32 flex items-end justify-around gap-1">
              <div class="text-center text-gray-400 text-xs w-full">Pilih siswa</div>
            </div>
          </div>

          <!-- Grafik 2: Kelulusan Harian -->
          <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 shadow-sm" style="min-height: 180px;">
            <h4 class="text-sm font-semibold text-green-800 mb-3 flex items-center gap-2">
              <span>âœ…</span> Rasio Kelulusan
            </h4>
            <div id="wali-chart-kelulusan" class="h-32 flex items-center justify-center">
              <div class="text-center text-gray-400 text-xs">Pilih siswa</div>
            </div>
          </div>

          <!-- Grafik 3: Nilai Rata-rata per Mapel -->
          <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 shadow-sm" style="min-height: 180px;">
            <h4 class="text-sm font-semibold text-purple-800 mb-3 flex items-center gap-2">
              <span>ğŸ“ˆ</span> Nilai per Mapel
            </h4>
            <div id="wali-chart-nilai" class="h-32 flex items-end justify-around gap-1">
              <div class="text-center text-gray-400 text-xs w-full">Pilih siswa</div>
            </div>
          </div>

          <!-- Grafik 4: Progress Target -->
          <div class="bg-gradient-to-br from-yellow-50 to-orange-100 rounded-xl p-4 shadow-sm" style="min-height: 180px;">
            <h4 class="text-sm font-semibold text-orange-800 mb-3 flex items-center gap-2">
              <span>ğŸ¯</span> Progress Target
            </h4>
            <div id="wali-chart-target" class="h-32 flex items-end justify-around gap-1">
              <div class="text-center text-gray-400 text-xs w-full">Pilih siswa</div>
            </div>
          </div>

          <!-- Grafik 5: Aktivitas Mingguan -->
          <div class="bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-xl p-4 shadow-sm" style="min-height: 180px;">
            <h4 class="text-sm font-semibold text-cyan-800 mb-3 flex items-center gap-2">
              <span>ğŸ“…</span> Aktivitas Mingguan
            </h4>
            <div id="wali-chart-aktivitas" class="h-32 flex items-end justify-around gap-1">
              <div class="text-center text-gray-400 text-xs w-full">Pilih siswa</div>
            </div>
          </div>

          <!-- Grafik 6: Kategori Kegiatan -->
          <div class="bg-gradient-to-br from-pink-50 to-rose-100 rounded-xl p-4 shadow-sm" style="min-height: 180px;">
            <h4 class="text-sm font-semibold text-rose-800 mb-3 flex items-center gap-2">
              <span>ğŸ“š</span> Kategori Kegiatan
            </h4>
            <div id="wali-chart-kategori" class="h-32 flex items-end justify-around gap-1">
              <div class="text-center text-gray-400 text-xs w-full">Pilih siswa</div>
            </div>
          </div>
        </div>

        <div class="flex gap-2 mb-4 overflow-x-auto">
          <button onclick="showWaliTab('laporan-harian')" id="wali-tab-laporan-harian" class="px-4 py-2 rounded-lg bg-indigo-600 text-white font-semibold whitespace-nowrap">ğŸ“ Laporan Harian</button>
          <button onclick="showWaliTab('laporan-kegiatan')" id="wali-tab-laporan-kegiatan" class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 whitespace-nowrap hover:bg-gray-300">ğŸ¯ Laporan Kegiatan</button>
          <button onclick="showWaliTab('nilai')" id="wali-tab-nilai" class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 whitespace-nowrap hover:bg-gray-300">ğŸ“Š Nilai</button>
          <button onclick="showWaliTab('target')" id="wali-tab-target" class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 whitespace-nowrap hover:bg-gray-300">ğŸ¯ Target</button>
          <button onclick="showWaliTab('absensi')" id="wali-tab-absensi" class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 whitespace-nowrap hover:bg-gray-300">ğŸ“‹ Absensi</button>
        </div>

        <div id="student-progress-detail" class="mt-6">
          <p class="text-gray-500 text-center py-8">Pilih kelas dan siswa untuk melihat perkembangan</p>
        </div>
      </section>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
